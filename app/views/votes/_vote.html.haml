- opinion ||= local_assigns[:specific]
.opinion__vote-section{id: "#{dom_id(opinion)}-vote" }
  - if !user_signed_in?
    %p.text-center
      %i.fa.fa-info-circle
      = link_to '로그인', new_user_session_path
      하면 위 주장에 대해 찬반 투표할 수 있습니다.
      - if opinion.votes.any?
        현재
        %strong.lead
          #{opinion.votes.count}
        명이 투표에 참여했습니다.

      = link_to '로그인 후에 투표에 참여하기', new_user_session_path, class: 'btn btn-danger btn-lg'
  - elsif opinion.voted_by? current_user
    .vote__results
      .row
        .col-xs-6
          %h2
            찬성
            %span.count= opinion.votes.with_choice(:agree).count
          - opinion.votes.with_choice(:agree).partial_included_with(current_user).each do |vote|
            - if vote.user == current_user
              %strong= byline vote.user
            - else
              = byline vote.user
        .col-xs-6
          %h2
            반대
            %span.count= opinion.votes.with_choice(:disagree).count
          - opinion.votes.with_choice(:disagree).partial_included_with(current_user).each do |vote|
            - if vote.user == current_user
              %strong= byline vote.user
            - else
              = byline vote.user


    %p.text-center(style="margin-top: 50px")
      %i.fa.fa-info-circle
      투표를 다음으로 변경합니다.
      - if opinion.agreed_by? current_user
        = link_to post_votes_path(opinion.acting_as, vote: {choice: :disagree}, partial: 'opinions/vote'), method: :post, remote: true, class: 'btn btn-default btn-sm' do
          %i.fa.fa-thumbs-down
          반대
      - if opinion.disagreed_by? current_user
        = link_to post_votes_path(opinion.acting_as, vote: {choice: :agree}, partial: 'opinions/vote'), method: :post, remote: true, class: 'btn btn-default btn-sm' do
          %i.fa.fa-thumbs-up
          찬성

  - else
    %p.text-center
      = link_to post_votes_path(opinion.acting_as, vote: {choice: :agree}, partial: 'opinions/vote'), method: :post, remote: true, class: 'btn btn-primary btn-lg' do
        %i.fa.fa-thumbs-up
        찬성
      = link_to post_votes_path(opinion.acting_as, vote: {choice: :disagree}, partial: 'opinions/vote'), method: :post, remote: true, class: 'btn btn-primary btn-lg' do
        %i.fa.fa-thumbs-down
        반대
    %p.text-center
      %i.fa.fa-info-circle
      투표 후에 다른 회원의 투표 현황을 볼 수 있습니다.
      - if opinion.votes.any?
        현재
        %strong.lead
          #{opinion.votes.count}
        명이 투표에 참여했습니다.
