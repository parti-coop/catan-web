var $drawer_issues = $('<%= j(render 'application/drawer_issues') %>');
$('#js-my-menu-drawer_issues').replaceWith($drawer_issues);
parti_partial$($drawer_issues, true);

$('.js-sidemenu-highlight-menu-parti').removeClass('highlight');

<% if host_group.indie? %>
  var need_to_group_highlight = false;
  if($('.js-sidemenu-highlight-current-parti-source').length > 0) {
    need_to_group_highlight = true;
  }
  if($('.js-sidemenu-highlight-indie-group').length > 0) {
    need_to_group_highlight = true;
  }
<% else %>
  var need_to_group_highlight = true;
<% end %>

$('.js-sidemenu-highlight-current-parti-source').each(function(index) {
  var current_parti_id = $(this).data('sidemenu-highlight-current-parti-id');
  var highlight_menu = $('.js-sidemenu-highlight-menu-parti-' + current_parti_id);

  if(highlight_menu.length > 0) {
    highlight_menu.addClass('highlight');
    highlight_menu.closest('.js-sidemenu-toggle-group').find('.js-sidemenu-toggle').trigger('click', 'unfold');
    need_to_group_highlight = false;
  }
});

if(need_to_group_highlight) {
  var highlight_menu = $('.js-sidemenu-highlight-menu-group-<%= host_group.id %>');
  highlight_menu.addClass('highlight');
}
