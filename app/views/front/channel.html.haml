- content_for :playground_header_content do
  .channel-menu
    .title.form-inline
      - search_q = PostSearchableIndex.sanitize_search_key(params.dig(:front_search, :q))

      = link_to_if @current_folder.present? || search_q.present?, "# #{@current_issue.title}", front_channel_path(issue_id: @current_issue), class: 'link'
      - if @current_issue.folders.any?
        - if @current_folder.present?
          - @current_folder.ancestors.each do |folder|
            \/
            = link_to folder.title, front_channel_path(issue_id: @current_issue, folder_id: folder.id), class: 'link'
          - if @current_folder.children.any?
            \/
            = @current_folder.title
            \/
            = select_tag :folder_id, options_from_collection_for_select(@current_folder.children, 'id', 'title'), include_blank: '폴더...', class: 'form-control form-control-sm', data: { controller: 'select-link', action: 'change->select-link#go', 'select-link-url-template': front_channel_path(issue_id: @current_issue, folder_id: "${value}") }
          - else
            \/
            = select_tag :folder_id, options_from_collection_for_select(@current_folder.siblings, 'id', 'title', @current_folder.id), class: 'form-control form-control-sm', data: { controller: 'select-link', action: 'change->select-link#go', 'select-link-url-template': front_channel_path(issue_id: @current_issue, folder_id: "${value}") }
        - else
          \/
          = select_tag :folder_id, options_from_collection_for_select(@current_issue.top_folders, 'id', 'title'), include_blank: '폴더...', class: 'form-control form-control-sm', data: { controller: 'select-link', action: 'change->select-link#go', 'select-link-url-template': front_channel_path(issue_id: @current_issue, folder_id: "${value}") }
      - if search_q.present?
        \/
        %span
          %i.fa.fa-search
          = search_q
- if @posts.any?
  .channel-box
    .post-lines-box
      .post-lines-header
        .pages
          - if @posts.current_page.present?
            페이지 #{@posts.current_page} / #{@posts.total_pages}
        .edit
          = link_to front_new_post_path(issue_id: @current_issue.id), class: 'btn btn-outline-primary btn-sm' do
            %i.fa.fa-pencil
            글쓰기
      = render 'front/post_lines', posts: @posts, current_post: @current_post, current_channel: @current_issue
    .supplementary-boxes
      - if @current_issue.body.present?
        .supplementary-box{ data: { controller: 'content-collapse', 'content-collapse': { id: "channel-intro-box-#{@current_issue.id}" } } }
          .header{ data: { action: 'click->content-collapse#toggle' } }
            .title
              소개
            .toggler
              %i.fa.-hide{ data: { target: 'content-collapse.content' } }
          .body{ data: { target: 'content-collapse.content' } }
            = simple_format h(@current_issue.body)
      - if @pinned_posts.any?
        .supplementary-box{ data: { controller: 'content-collapse', 'content-collapse': { id: "pinned-posts-box-#{@current_issue.id}" } } }
          .header{ data: { action: 'click->content-collapse#toggle' } }
            .title
              고정글
            .count
              = @pinned_posts.size
            .toggler
              %i.fa.-hide{ data: { target: 'content-collapse.content' } }
          %ul.lines.-hide{ data: { 'controller': 'collection-activation', target: 'content-collapse.content' } }
            - @pinned_posts.each do |post|
              %li.pinned-post-line{ class: [('-active' if post == @current_post), ('-unread' unless post.read?(current_user))], data: { action: 'click->collection-activation#toggle', target: 'collection-activation.item' } }
                .icon
                  - if post.poll.present?
                    %i.fa.fa-fire.fa-fw
                  - elsif post.survey.present?
                    %i.fa.fa-list-ul.fa-fw
                  - elsif post.wiki.present?
                    %i.fa.fa-file-word-o.fa-fw
                  - else
                    %i.fa.fa-stack-exchange.fa-fw
                .body
                  - unless post.blinded?(current_user)
                    .title
                      = link_to front_post_path(post_id: post.id), class: 'hover:text-primary' do
                        != post.title
                  - else
                    .title.-blind
                      %i.fa.fa-info-circle
                      = t('labels.post_blind_info')

- else
  .alert.alert-info
    게시글이 없습니다. 가장 먼저 게시글을 올려보세요.