- paging = (!@posts.nil? and @posts.try(:current_page).present?)

= render 'issues/issue_header', issue: @issue, simple: true

%section.contents-page#posts
  .container
    .row
      = main_column_tag do
        .posts{data: {last_id: -1, is_last: 'false'}}
          .contents-header.content-header-margin-bottom.xs-horizontal-padding
            %h4.contents-header__title.vertical-shrinking
              \##{@hashtag}
              %small
                해시태그된 게시물입니다.
          #no-data.text-center.alert{ style: 'display: none;' }
            %i.fa.fa-info-circle
              게시글이 없습니다.
          - if paging
            - if @posts.any?
              = render 'posts/page', posts: @posts, show_issue: false, first_today_text: ("게시물 #{number_with_delimiter @posts.total_count}개 중에 #{@posts.current_page}페이지를 표시합니다" unless @posts.first_page?)
            - else
              #no-data.text-center.alert
                %i.fa.fa-info-circle
                  게시글이 없습니다.
        - if paging
          = paginate @posts, theme: 'catan'

          - if @recommend_posts.any?
            %hr

            .post-data-divider 다른 빠띠에선 이런 이야기를 나누고 있어요
            = render 'posts/list_card', posts: @recommend_posts.limit(30).to_a.sample(3)
        - else
          .page-waypoint.js-page-waypoint-onload.text-center{'data-target': '.posts', 'data-url': smart_issue_hashtag_url(@issue, @hashtag, format: :js)}
            .page-waypoint-loading.js-page-waypoint-loading
              %i.fa.fa-2x.fa-spinner.fa-pulse
