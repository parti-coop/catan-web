.well.post-edit-form
  = form_for @post do |f|
    = f.hidden_field :has_poll, value: "#{ 'true' if @post.poll.present? }"
    = f.hidden_field :has_survey, value: "#{ 'true' if @post.survey.present? }"

    .form-group.redactor-box-style-wrapper
      = f.label :body
      = f.text_area :body, class: "form-control validate redactor", data: {ride: 'parti-autoresize'}

    - if @post.file_sources.any?
      .form-widget-references
        .post-file-field
          .help-block.clearfix
            %span.label.label-default TIP
            최대 10M까지 업로드됩니다. 이미지는 드래그해서 순서를 조정할 수 있습니다.
          .form-groups#js-post-editor-file_sources-wrapper<>
            #js-form-group-images.form-group-images{ class: ('js-any' if @post.file_sources.only_image.any?) }<>
              - @post.file_sources.only_image.sort_by_seq_no.each do |file_source|
                = f.fields_for :file_sources, file_source do |ff|
                  = render 'posts/file_source_fields', f: ff
              .js-last-position
            #js-form-group-files.form-group-files{ class: ('js-any' if @post.file_sources.only_doc.any?) }<>
              - @post.file_sources.only_doc.sort_by_seq_no.each do |file_source|
                = f.fields_for :file_sources, file_source do |ff|
                  = render 'posts/file_source_fields', f: ff
          .add-form-group-btn#js-post-editor-file_sources-add-btn
            = link_to_add_association '+ 추가', f, :file_sources, partial: 'posts/file_source_fields', 'data-association-insertion-node': '.form-groups#js-post-editor-file_sources-wrapper #js-form-group-images .js-last-position'
            %span.count
              (
              %span.js-current-count<>= @post.file_sources.count
              \/10)

    - if @post.poll.present?
      = f.fields_for :poll do |ff|
        .form-group
          = ff.label :title
          = ff.text_field :title, placeholder: '찬반투표 제목: ex. 탕수육소스는 찍어먹어야합니다', class: 'form-control'

    - if @post.survey.present?
      = f.fields_for :survey do |ff|
        .form-group
          = ff.label :duration
          %div
            %span #{l f.object.created_at.to_date}부터 &nbsp;
            = ff.select :duration, options_for_select((1..10).map { |i| [ "#{i}일 간", i] }, ff.object.duration), {}, class: 'form-control', style: 'width: 50%; display: inline-block'
    .editor-btn.text-right
      = link_to '취소', @post, class: 'btn btn-default'
      = f.submit '저장', class: 'btn btn-primary btn-ghost', data: { disable_with: "저장 중..." }


