- issue = local_assigns[:issue]
- issue_visited = issue.present? and issue.visited?(current_user)
- before_post_unread = (issue_visited and issue.unread_post_last_stroked_at?(current_user, @previous_last_post_stroked_at))

- if @previous_last_post_stroked_at.blank? and issue_visited and posts.first&.unread?(current_user)
  .post-card.post-new-stroked{ class: issue_unread_banner_dom_class(issue), style: 'background-color: white; color: gray; text-align: center;' }
    .post-card__post{ style: 'line-height: 14px;' }
      %i.fa.fa-arrow-down
      새로 업데이트된 게시물
      = link_to visit_issue_path(issue, dom_class: issue_unread_banner_dom_class(issue)), remote: true, method: :post, class: 'close', style: 'line-height: 18px; color: gray; opacity: 1; font-weight: 100;' do
        %span &#215;

- posts.each do |post|
  - if !post.blinded?(current_user) and !post.private_blocked?(current_user)
    - if issue_visited and before_post_unread and !post.unread?(current_user)
      .post-card.post-new-stroked{ class: issue_unread_banner_dom_class(issue), style: 'background-color: white; color: gray; text-align: center;' }
        .post-card__post{ style: 'line-height: 14px;' }
          %i.fa.fa-arrow-up
          새로 업데이트된 게시물
          = link_to visit_issue_path(issue, dom_class: issue_unread_banner_dom_class(issue)), remote: true, method: :post, class: 'close js-read-all-posts', style: 'line-height: 18px; color: gray; opacity: 1; font-weight: 100;' do
            %span &#215;
    .post-card__content
      - post_card_dom_id = "post-card-#{SecureRandom.uuid}"
      .post-card.js-lazy-partal-load{ id: post_card_dom_id, data: { url: post_url(post, subdomain: current_group.try(:subdomain), dom_id: post_card_dom_id, assigns: to_json_primitive_only(local_assigns.merge(mode: 'list')), format: :js) } }
        .skeletons
          .skeleton-user
            .skeleton-user-icon
            .skeleton-user-meta
              .skeleton-user-nickname
              .skeleton-post-date
          %ul.list-unstyled
            - 4.times do
              %li.skeleton-item{ style: "width: #{[70, 100, 80].sample}%;" }

    - before_post_unread = post.unread?(current_user)
