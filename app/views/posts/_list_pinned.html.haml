- if posts.present?
  .post-card-with-comments.pinned{ class: ('only-unread' if local_assigns[:only_unread]) }
    .post-card-with-comments__header.clearfix
      공지

    - read_posts, unread_posts = posts.to_a.reject { |p| p.blinded?(current_user) or p.private_blocked?(current_user) }.partition { |p| p.read_by?(current_user) }
    - unread_posts.each do |post|
      .unread
        = render 'posts/post_pinned', local_assigns.merge(post: post)

    - collapsing_read = (unread_posts.any? or (read_posts.count > 1))

    - if read_posts.any? and collapsing_read
      .post-card-with-comments__post.js-show-all-pinned-post-wrapper
        .show-all.js-show-all-pinned-post
          이미 확인한 공지 펼쳐보기
          %i.fa.fa-chevron-down

    - read_posts.each do |post|
      .read.js-posts-pinned-and-read{ class: ('collapse' if collapsing_read) }
        = render 'posts/post_pinned', local_assigns.merge(post: post)
