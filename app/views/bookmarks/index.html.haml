%section.contents-page#posts
  .container
    .row
      = main_column_tag do
        = render 'application/my_home_tab'
        - if @tag_names.any?
          .post-data-divider.search-bookmark-tags
            - togglable_class = "uid-#{SecureRandom.uuid}"
            .title.js-basic-toggle-collapse.cursor-pointer{ 'data-show-target': ".#{togglable_class}" }
              %i.fa.fa-tag
              태그 (#{@tag_names.count})
              %i.fa.fa-angle-down
            .bookmark-tags{ class: "#{togglable_class} #{'collapse' if @search_tag_names.blank?}" }
              - @tag_names.each do |tag_name|
                - if @search_tag_names.include?(tag_name)
                  - new_search_tag_names = @search_tag_names.reject { |search_tag_name| search_tag_name == tag_name }
                  = link_to bookmarks_url(subdomain: nil, tag_names: new_search_tag_names), class: 'bookmark-tag bookmark-tag-active' do
                    .bookmark-tag-name
                      #{tag_name}
                    .bookmark-remove-btn
                      %i.fa.fa-check
                - else
                  - new_search_tag_names = @search_tag_names + [tag_name]
                  = link_to bookmarks_url(subdomain: nil, tag_names: new_search_tag_names), class: "bookmark-tag #{togglable_class} collapse" do
                    .bookmark-tag-name
                      #{tag_name}

        - @bookmarked_posts.each do |issue, posts|
          .post-data-divider
            = link_to smart_issue_home_url(issue) do
              = issue_tag(issue)
          .post-card.summary
            - posts.each do |post|
              = render 'posts/post_bookmarked', post: post
        - if @bookmarked_posts.empty?
          .text-center.alert
            %i.fa.fa-info-circle
              북마크가 없습니다.
      = render 'application/aside'